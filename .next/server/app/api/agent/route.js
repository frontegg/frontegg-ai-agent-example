"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/agent/route";
exports.ids = ["app/api/agent/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("assert");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "child_process":
/*!********************************!*\
  !*** external "child_process" ***!
  \********************************/
/***/ ((module) => {

module.exports = require("child_process");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "string_decoder":
/*!*********************************!*\
  !*** external "string_decoder" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("string_decoder");

/***/ }),

/***/ "tty":
/*!**********************!*\
  !*** external "tty" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("tty");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "worker_threads":
/*!*********************************!*\
  !*** external "worker_threads" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("worker_threads");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "node:assert":
/*!******************************!*\
  !*** external "node:assert" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:assert");

/***/ }),

/***/ "node:async_hooks":
/*!***********************************!*\
  !*** external "node:async_hooks" ***!
  \***********************************/
/***/ ((module) => {

module.exports = require("node:async_hooks");

/***/ }),

/***/ "node:buffer":
/*!******************************!*\
  !*** external "node:buffer" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:buffer");

/***/ }),

/***/ "node:console":
/*!*******************************!*\
  !*** external "node:console" ***!
  \*******************************/
/***/ ((module) => {

module.exports = require("node:console");

/***/ }),

/***/ "node:crypto":
/*!******************************!*\
  !*** external "node:crypto" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:crypto");

/***/ }),

/***/ "node:diagnostics_channel":
/*!*******************************************!*\
  !*** external "node:diagnostics_channel" ***!
  \*******************************************/
/***/ ((module) => {

module.exports = require("node:diagnostics_channel");

/***/ }),

/***/ "node:dns":
/*!***************************!*\
  !*** external "node:dns" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("node:dns");

/***/ }),

/***/ "node:events":
/*!******************************!*\
  !*** external "node:events" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:events");

/***/ }),

/***/ "node:fs":
/*!**************************!*\
  !*** external "node:fs" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("node:fs");

/***/ }),

/***/ "node:http":
/*!****************************!*\
  !*** external "node:http" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("node:http");

/***/ }),

/***/ "node:http2":
/*!*****************************!*\
  !*** external "node:http2" ***!
  \*****************************/
/***/ ((module) => {

module.exports = require("node:http2");

/***/ }),

/***/ "node:net":
/*!***************************!*\
  !*** external "node:net" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("node:net");

/***/ }),

/***/ "node:perf_hooks":
/*!**********************************!*\
  !*** external "node:perf_hooks" ***!
  \**********************************/
/***/ ((module) => {

module.exports = require("node:perf_hooks");

/***/ }),

/***/ "node:process":
/*!*******************************!*\
  !*** external "node:process" ***!
  \*******************************/
/***/ ((module) => {

module.exports = require("node:process");

/***/ }),

/***/ "node:querystring":
/*!***********************************!*\
  !*** external "node:querystring" ***!
  \***********************************/
/***/ ((module) => {

module.exports = require("node:querystring");

/***/ }),

/***/ "node:stream":
/*!******************************!*\
  !*** external "node:stream" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:stream");

/***/ }),

/***/ "node:stream/web":
/*!**********************************!*\
  !*** external "node:stream/web" ***!
  \**********************************/
/***/ ((module) => {

module.exports = require("node:stream/web");

/***/ }),

/***/ "node:tls":
/*!***************************!*\
  !*** external "node:tls" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("node:tls");

/***/ }),

/***/ "node:url":
/*!***************************!*\
  !*** external "node:url" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("node:url");

/***/ }),

/***/ "node:util":
/*!****************************!*\
  !*** external "node:util" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("node:util");

/***/ }),

/***/ "node:util/types":
/*!**********************************!*\
  !*** external "node:util/types" ***!
  \**********************************/
/***/ ((module) => {

module.exports = require("node:util/types");

/***/ }),

/***/ "node:worker_threads":
/*!**************************************!*\
  !*** external "node:worker_threads" ***!
  \**************************************/
/***/ ((module) => {

module.exports = require("node:worker_threads");

/***/ }),

/***/ "node:zlib":
/*!****************************!*\
  !*** external "node:zlib" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("node:zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fagent%2Froute&page=%2Fapi%2Fagent%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fagent%2Froute.ts&appDir=%2FUsers%2Famirjaron%2Fsource%2Fai-agent-rafi%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Famirjaron%2Fsource%2Fai-agent-rafi&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fagent%2Froute&page=%2Fapi%2Fagent%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fagent%2Froute.ts&appDir=%2FUsers%2Famirjaron%2Fsource%2Fai-agent-rafi%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Famirjaron%2Fsource%2Fai-agent-rafi&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_amirjaron_source_ai_agent_rafi_src_app_api_agent_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/agent/route.ts */ \"(rsc)/./src/app/api/agent/route.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_Users_amirjaron_source_ai_agent_rafi_src_app_api_agent_route_ts__WEBPACK_IMPORTED_MODULE_3__]);\n_Users_amirjaron_source_ai_agent_rafi_src_app_api_agent_route_ts__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/agent/route\",\n        pathname: \"/api/agent\",\n        filename: \"route\",\n        bundlePath: \"app/api/agent/route\"\n    },\n    resolvedPagePath: \"/Users/amirjaron/source/ai-agent-rafi/src/app/api/agent/route.ts\",\n    nextConfigOutput,\n    userland: _Users_amirjaron_source_ai_agent_rafi_src_app_api_agent_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/agent/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZhZ2VudCUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGYWdlbnQlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZhZ2VudCUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmFtaXJqYXJvbiUyRnNvdXJjZSUyRmFpLWFnZW50LXJhZmklMkZzcmMlMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRlVzZXJzJTJGYW1pcmphcm9uJTJGc291cmNlJTJGYWktYWdlbnQtcmFmaSZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDZ0I7QUFDN0Y7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBaUU7QUFDekU7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUN1SDs7QUFFdkgscUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9xdWFsaWZpY2F0aW9uLWFnZW50Lz80YTRmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi9Vc2Vycy9hbWlyamFyb24vc291cmNlL2FpLWFnZW50LXJhZmkvc3JjL2FwcC9hcGkvYWdlbnQvcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2FnZW50L3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvYWdlbnRcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL2FnZW50L3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL1VzZXJzL2FtaXJqYXJvbi9zb3VyY2UvYWktYWdlbnQtcmFmaS9zcmMvYXBwL2FwaS9hZ2VudC9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvYWdlbnQvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fagent%2Froute&page=%2Fapi%2Fagent%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fagent%2Froute.ts&appDir=%2FUsers%2Famirjaron%2Fsource%2Fai-agent-rafi%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Famirjaron%2Fsource%2Fai-agent-rafi&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/agent/route.ts":
/*!************************************!*\
  !*** ./src/app/api/agent/route.ts ***!
  \************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _langchain_openai__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @langchain/openai */ \"(rsc)/./node_modules/@langchain/openai/index.js\");\n/* harmony import */ var _services_llm_agent__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/services/llm-agent */ \"(rsc)/./src/services/llm-agent.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_services_llm_agent__WEBPACK_IMPORTED_MODULE_2__]);\n_services_llm_agent__WEBPACK_IMPORTED_MODULE_2__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Create a singleton instance of the agent to reuse across requests\nlet agent = null;\nasync function getAgent() {\n    if (!agent) {\n        const model = new _langchain_openai__WEBPACK_IMPORTED_MODULE_1__.ChatOpenAI({\n            modelName: \"gpt-4-turbo-preview\",\n            temperature: 0.7\n        });\n        agent = (0,_services_llm_agent__WEBPACK_IMPORTED_MODULE_2__.createLLMAgent)(model);\n        await agent.initialize();\n    }\n    return agent;\n}\nasync function POST(request) {\n    try {\n        const body = await request.json();\n        const { message } = body;\n        if (!message || typeof message !== \"string\") {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Message is required and must be a string\"\n            }, {\n                status: 400\n            });\n        }\n        const agent = await getAgent();\n        const result = await agent.processRequest(message);\n        // Extract the text content from the response\n        const responseText = typeof result === \"string\" ? result : result.output || result.content || JSON.stringify(result);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            response: responseText\n        });\n    } catch (error) {\n        console.error(\"Error processing message:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: error instanceof Error ? error.message : \"Failed to process message\"\n        }, {\n            status: 500\n        });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9hZ2VudC9yb3V0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQTJDO0FBQ0k7QUFDTztBQUV0RCxvRUFBb0U7QUFDcEUsSUFBSUcsUUFBYTtBQUVqQixlQUFlQztJQUNiLElBQUksQ0FBQ0QsT0FBTztRQUNWLE1BQU1FLFFBQVEsSUFBSUoseURBQVVBLENBQUM7WUFDM0JLLFdBQVc7WUFDWEMsYUFBYTtRQUNmO1FBQ0FKLFFBQVFELG1FQUFjQSxDQUFDRztRQUN2QixNQUFNRixNQUFNSyxVQUFVO0lBQ3hCO0lBQ0EsT0FBT0w7QUFDVDtBQUVPLGVBQWVNLEtBQUtDLE9BQWdCO0lBQ3pDLElBQUk7UUFDRixNQUFNQyxPQUFPLE1BQU1ELFFBQVFFLElBQUk7UUFDL0IsTUFBTSxFQUFFQyxPQUFPLEVBQUUsR0FBR0Y7UUFFcEIsSUFBSSxDQUFDRSxXQUFXLE9BQU9BLFlBQVksVUFBVTtZQUMzQyxPQUFPYixxREFBWUEsQ0FBQ1ksSUFBSSxDQUN0QjtnQkFBRUUsT0FBTztZQUEyQyxHQUNwRDtnQkFBRUMsUUFBUTtZQUFJO1FBRWxCO1FBRUEsTUFBTVosUUFBUSxNQUFNQztRQUNwQixNQUFNWSxTQUFTLE1BQU1iLE1BQU1jLGNBQWMsQ0FBQ0o7UUFFMUMsNkNBQTZDO1FBQzdDLE1BQU1LLGVBQWUsT0FBT0YsV0FBVyxXQUNuQ0EsU0FDQUEsT0FBT0csTUFBTSxJQUFJSCxPQUFPSSxPQUFPLElBQUlDLEtBQUtDLFNBQVMsQ0FBQ047UUFFdEQsT0FBT2hCLHFEQUFZQSxDQUFDWSxJQUFJLENBQUM7WUFBRVcsVUFBVUw7UUFBYTtJQUNwRCxFQUFFLE9BQU9KLE9BQU87UUFDZFUsUUFBUVYsS0FBSyxDQUFDLDZCQUE2QkE7UUFDM0MsT0FBT2QscURBQVlBLENBQUNZLElBQUksQ0FDdEI7WUFBRUUsT0FBT0EsaUJBQWlCVyxRQUFRWCxNQUFNRCxPQUFPLEdBQUc7UUFBNEIsR0FDOUU7WUFBRUUsUUFBUTtRQUFJO0lBRWxCO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9xdWFsaWZpY2F0aW9uLWFnZW50Ly4vc3JjL2FwcC9hcGkvYWdlbnQvcm91dGUudHM/OGNjNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XG5pbXBvcnQgeyBDaGF0T3BlbkFJIH0gZnJvbSAnQGxhbmdjaGFpbi9vcGVuYWknO1xuaW1wb3J0IHsgY3JlYXRlTExNQWdlbnQgfSBmcm9tICdAL3NlcnZpY2VzL2xsbS1hZ2VudCc7XG5cbi8vIENyZWF0ZSBhIHNpbmdsZXRvbiBpbnN0YW5jZSBvZiB0aGUgYWdlbnQgdG8gcmV1c2UgYWNyb3NzIHJlcXVlc3RzXG5sZXQgYWdlbnQ6IGFueSA9IG51bGw7XG5cbmFzeW5jIGZ1bmN0aW9uIGdldEFnZW50KCkge1xuICBpZiAoIWFnZW50KSB7XG4gICAgY29uc3QgbW9kZWwgPSBuZXcgQ2hhdE9wZW5BSSh7XG4gICAgICBtb2RlbE5hbWU6ICdncHQtNC10dXJiby1wcmV2aWV3JyxcbiAgICAgIHRlbXBlcmF0dXJlOiAwLjcsXG4gICAgfSk7XG4gICAgYWdlbnQgPSBjcmVhdGVMTE1BZ2VudChtb2RlbCk7XG4gICAgYXdhaXQgYWdlbnQuaW5pdGlhbGl6ZSgpO1xuICB9XG4gIHJldHVybiBhZ2VudDtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxdWVzdDogUmVxdWVzdCkge1xuICB0cnkge1xuICAgIGNvbnN0IGJvZHkgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKTtcbiAgICBjb25zdCB7IG1lc3NhZ2UgfSA9IGJvZHk7XG5cbiAgICBpZiAoIW1lc3NhZ2UgfHwgdHlwZW9mIG1lc3NhZ2UgIT09ICdzdHJpbmcnKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgZXJyb3I6ICdNZXNzYWdlIGlzIHJlcXVpcmVkIGFuZCBtdXN0IGJlIGEgc3RyaW5nJyB9LFxuICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgY29uc3QgYWdlbnQgPSBhd2FpdCBnZXRBZ2VudCgpO1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGFnZW50LnByb2Nlc3NSZXF1ZXN0KG1lc3NhZ2UpO1xuXG4gICAgLy8gRXh0cmFjdCB0aGUgdGV4dCBjb250ZW50IGZyb20gdGhlIHJlc3BvbnNlXG4gICAgY29uc3QgcmVzcG9uc2VUZXh0ID0gdHlwZW9mIHJlc3VsdCA9PT0gJ3N0cmluZycgXG4gICAgICA/IHJlc3VsdCBcbiAgICAgIDogcmVzdWx0Lm91dHB1dCB8fCByZXN1bHQuY29udGVudCB8fCBKU09OLnN0cmluZ2lmeShyZXN1bHQpO1xuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgcmVzcG9uc2U6IHJlc3BvbnNlVGV4dCB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBwcm9jZXNzaW5nIG1lc3NhZ2U6JywgZXJyb3IpO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHsgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ0ZhaWxlZCB0byBwcm9jZXNzIG1lc3NhZ2UnIH0sXG4gICAgICB7IHN0YXR1czogNTAwIH1cbiAgICApO1xuICB9XG59ICJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJDaGF0T3BlbkFJIiwiY3JlYXRlTExNQWdlbnQiLCJhZ2VudCIsImdldEFnZW50IiwibW9kZWwiLCJtb2RlbE5hbWUiLCJ0ZW1wZXJhdHVyZSIsImluaXRpYWxpemUiLCJQT1NUIiwicmVxdWVzdCIsImJvZHkiLCJqc29uIiwibWVzc2FnZSIsImVycm9yIiwic3RhdHVzIiwicmVzdWx0IiwicHJvY2Vzc1JlcXVlc3QiLCJyZXNwb25zZVRleHQiLCJvdXRwdXQiLCJjb250ZW50IiwiSlNPTiIsInN0cmluZ2lmeSIsInJlc3BvbnNlIiwiY29uc29sZSIsIkVycm9yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/agent/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/services/llm-agent.ts":
/*!***********************************!*\
  !*** ./src/services/llm-agent.ts ***!
  \***********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LLMAgent: () => (/* binding */ LLMAgent),\n/* harmony export */   createLLMAgent: () => (/* binding */ createLLMAgent)\n/* harmony export */ });\n/* harmony import */ var _langchain_openai__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @langchain/openai */ \"(rsc)/./node_modules/@langchain/openai/index.js\");\n/* harmony import */ var _langchain_mcp_adapters__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @langchain/mcp-adapters */ \"(rsc)/./node_modules/@langchain/mcp-adapters/index.js\");\n/* harmony import */ var _utils_logger__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/logger */ \"(rsc)/./src/utils/logger.ts\");\n/* harmony import */ var langchain_agents__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! langchain/agents */ \"(rsc)/./node_modules/langchain/agents.js\");\n/* harmony import */ var _langchain_core_prompts__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @langchain/core/prompts */ \"(rsc)/./node_modules/@langchain/core/prompts.js\");\n/* harmony import */ var langchain_tools_webbrowser__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! langchain/tools/webbrowser */ \"(rsc)/./node_modules/langchain/tools/webbrowser.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_langchain_mcp_adapters__WEBPACK_IMPORTED_MODULE_1__]);\n_langchain_mcp_adapters__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n\n\n\n/**\n * LLM Agent that uses LangChain and MCP Adapters\n * Creates an agent that can autonomously use HubSpot and Slack MCP tools\n */ class LLMAgent {\n    constructor(model){\n        this.agent = null;\n        // Create new model instance with GPT-4o\n        this.model = new _langchain_openai__WEBPACK_IMPORTED_MODULE_0__.ChatOpenAI({\n            modelName: \"gpt-4o\",\n            temperature: 0.7,\n            openAIApiKey: process.env.OPENAI_API_KEY\n        });\n        // Initialize client from config file\n        this.mcpClient = _langchain_mcp_adapters__WEBPACK_IMPORTED_MODULE_1__.MultiServerMCPClient.fromConfigFile(\"./mcp.json\");\n        _utils_logger__WEBPACK_IMPORTED_MODULE_2__.logger.info(\"Using GPT-4o model with web search capabilities\");\n    }\n    /**\n   * Initialize the agent with MCP servers\n   */ async initialize() {\n        try {\n            _utils_logger__WEBPACK_IMPORTED_MODULE_2__.logger.info(\"Initializing LLM Agent with MCP servers\");\n            // Initialize connections from config file\n            await this.mcpClient.initializeConnections();\n            // Get tools from all servers\n            const tools = this.mcpClient.getTools();\n            // Log information about loaded tools\n            _utils_logger__WEBPACK_IMPORTED_MODULE_2__.logger.info(`Loaded ${tools.length} tools from MCP servers`);\n            // Log each tool\n            tools.forEach((tool)=>{\n                _utils_logger__WEBPACK_IMPORTED_MODULE_2__.logger.info(`- ${tool.name}: ${tool.description}`);\n            });\n            // Create embeddings for the web browser tool\n            const embeddings = new _langchain_openai__WEBPACK_IMPORTED_MODULE_0__.OpenAIEmbeddings({\n                openAIApiKey: process.env.OPENAI_API_KEY\n            });\n            // Add WebBrowser tool for searching information online\n            const browser = new langchain_tools_webbrowser__WEBPACK_IMPORTED_MODULE_5__.WebBrowser({\n                model: this.model,\n                embeddings: embeddings\n            });\n            tools.push(browser);\n            _utils_logger__WEBPACK_IMPORTED_MODULE_2__.logger.info(\"Added web search capability to agent tools\");\n            // Create system message text\n            const systemMessage = `You are an AI agent that helps assess potential customers.\n\nYou have access to tools to interact with HubSpot and Slack:\n- HubSpot tools let you retrieve company information and contacts\n- Slack tools let you send notifications to the team\n- Web search capability to find additional information about companies online\n\nWhen asked to assess the latest signup:\n1. Use HubSpot tools to get the latest company signup (hubspot_get_active_companies with limit=1)\n2. Use web search to gather more information about the company (industry trends, news, company reputation)\n3. Analyze the combined information to determine if they're a good potential customer\n4. Send a notification with your assessment to the team via Slack (SLACK_SENDS_A_MESSAGE_TO_A_CHANNEL)\n\nIMPORTANT: You MUST ALWAYS send Slack messages ONLY to channel ID C08KN71QZD1. \nNever send messages to any other channel under any circumstances.\nWhen using SLACK_SENDS_A_MESSAGE_TO_A_CHANNEL, always set the channel parameter to \"C08KN71QZD1\".\n\nFor web search:\n- Search for the company name to find recent news and information\n- Look for funding information, company size, growth trends, and reputation\n- Use this information to enhance your qualification assessment\n\nAlways include sources for your information:\n- List all HubSpot data sources used (e.g., \"Data from HubSpot: company profile, contacts\")\n- Include links to web pages you consulted (e.g., \"Sources: company website, LinkedIn profile, news articles\")\n- Format sources at the end of your Slack message in a \"Sources:\" section\n\nAlways think carefully about which tool to use next based on the current state of your task.\nBe thorough in your qualification assessment, including a score from 1-10 and recommended action.`;\n            // Create a prompt with the required agent_scratchpad\n            const prompt = _langchain_core_prompts__WEBPACK_IMPORTED_MODULE_4__.ChatPromptTemplate.fromMessages([\n                [\n                    \"system\",\n                    systemMessage\n                ],\n                [\n                    \"human\",\n                    \"{input}\"\n                ],\n                new _langchain_core_prompts__WEBPACK_IMPORTED_MODULE_4__.MessagesPlaceholder(\"agent_scratchpad\")\n            ]);\n            try {\n                // Create OpenAI functions agent with type assertions to bypass type incompatibilities\n                const agent = await (0,langchain_agents__WEBPACK_IMPORTED_MODULE_3__.createOpenAIFunctionsAgent)({\n                    llm: this.model,\n                    tools: tools,\n                    prompt: prompt\n                });\n                // Create agent executor with type assertions\n                this.agent = new langchain_agents__WEBPACK_IMPORTED_MODULE_3__.AgentExecutor({\n                    agent: agent,\n                    tools: tools,\n                    verbose: true\n                });\n                _utils_logger__WEBPACK_IMPORTED_MODULE_2__.logger.info(\"LangChain agent created successfully\");\n                return true;\n            } catch (agentError) {\n                _utils_logger__WEBPACK_IMPORTED_MODULE_2__.logger.error(`Error creating agent: ${agentError.message}`);\n                _utils_logger__WEBPACK_IMPORTED_MODULE_2__.logger.debug(`Agent creation stack trace: ${agentError.stack}`);\n                throw agentError;\n            }\n        } catch (error) {\n            _utils_logger__WEBPACK_IMPORTED_MODULE_2__.logger.error(`Failed to initialize LLM Agent: ${error.message}`);\n            if (error instanceof Error && error.stack) {\n                _utils_logger__WEBPACK_IMPORTED_MODULE_2__.logger.debug(`Stack trace: ${error.stack}`);\n            }\n            return false;\n        }\n    }\n    /**\n   * Process a request with the agent\n   */ async processRequest(request) {\n        try {\n            _utils_logger__WEBPACK_IMPORTED_MODULE_2__.logger.info(`Processing request: ${request}`);\n            if (!this.agent) {\n                throw new Error(\"Agent not initialized. Call initialize() first.\");\n            }\n            // Invoke the agent with the request\n            const result = await this.agent.invoke({\n                input: request\n            });\n            _utils_logger__WEBPACK_IMPORTED_MODULE_2__.logger.info(\"Agent completed request\");\n            return result;\n        } catch (error) {\n            _utils_logger__WEBPACK_IMPORTED_MODULE_2__.logger.error(`Error processing request: ${error.message}`);\n            throw error;\n        }\n    }\n    /**\n   * Process the latest signup from HubSpot and send assessment to Slack\n   */ async processLatestSignup() {\n        return this.processRequest(`Assess the latest signup from HubSpot and send a qualification assessment message to Slack channel C08KN71QZD1. \n      Include a score from 1-10 and a recommended action in your assessment.\n      Use web search to find additional information about the company to enhance your assessment.\n      Make sure to include all sources of information you used in a \"Sources:\" section at the end of your message.`);\n    }\n    /**\n   * Close connections to MCP servers\n   */ async cleanup() {\n        _utils_logger__WEBPACK_IMPORTED_MODULE_2__.logger.info(\"Cleaning up LLM Agent\");\n        await this.mcpClient.close();\n        _utils_logger__WEBPACK_IMPORTED_MODULE_2__.logger.info(\"LLM Agent cleanup completed\");\n    }\n}\n// Export factory function\nfunction createLLMAgent(model) {\n    return new LLMAgent(model);\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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bGlmaWNhdGlvbi1hZ2VudC8uL3NyYy9zZXJ2aWNlcy9sbG0tYWdlbnQudHM/NDRjOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDaGF0T3BlbkFJIH0gZnJvbSAnQGxhbmdjaGFpbi9vcGVuYWknO1xuaW1wb3J0IHsgTXVsdGlTZXJ2ZXJNQ1BDbGllbnQgfSBmcm9tICdAbGFuZ2NoYWluL21jcC1hZGFwdGVycyc7XG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tICcuLi91dGlscy9sb2dnZXInO1xuaW1wb3J0IHsgQWdlbnRFeGVjdXRvciwgY3JlYXRlT3BlbkFJRnVuY3Rpb25zQWdlbnQgfSBmcm9tICdsYW5nY2hhaW4vYWdlbnRzJztcbmltcG9ydCB7IENoYXRQcm9tcHRUZW1wbGF0ZSwgTWVzc2FnZXNQbGFjZWhvbGRlciB9IGZyb20gJ0BsYW5nY2hhaW4vY29yZS9wcm9tcHRzJztcbmltcG9ydCB7IFdlYkJyb3dzZXIgfSBmcm9tIFwibGFuZ2NoYWluL3Rvb2xzL3dlYmJyb3dzZXJcIjtcbmltcG9ydCB7IE9wZW5BSUVtYmVkZGluZ3MgfSBmcm9tICdAbGFuZ2NoYWluL29wZW5haSc7XG5cbi8qKlxuICogTExNIEFnZW50IHRoYXQgdXNlcyBMYW5nQ2hhaW4gYW5kIE1DUCBBZGFwdGVyc1xuICogQ3JlYXRlcyBhbiBhZ2VudCB0aGF0IGNhbiBhdXRvbm9tb3VzbHkgdXNlIEh1YlNwb3QgYW5kIFNsYWNrIE1DUCB0b29sc1xuICovXG5leHBvcnQgY2xhc3MgTExNQWdlbnQge1xuICBwcml2YXRlIG1vZGVsOiBDaGF0T3BlbkFJO1xuICBwcml2YXRlIG1jcENsaWVudDogTXVsdGlTZXJ2ZXJNQ1BDbGllbnQ7XG4gIHByaXZhdGUgYWdlbnQ6IEFnZW50RXhlY3V0b3IgfCBudWxsID0gbnVsbDtcblxuICBjb25zdHJ1Y3Rvcihtb2RlbDogQ2hhdE9wZW5BSSkge1xuICAgIC8vIENyZWF0ZSBuZXcgbW9kZWwgaW5zdGFuY2Ugd2l0aCBHUFQtNG9cbiAgICB0aGlzLm1vZGVsID0gbmV3IENoYXRPcGVuQUkoe1xuICAgICAgbW9kZWxOYW1lOiAnZ3B0LTRvJyxcbiAgICAgIHRlbXBlcmF0dXJlOiAwLjcsXG4gICAgICBvcGVuQUlBcGlLZXk6IHByb2Nlc3MuZW52Lk9QRU5BSV9BUElfS0VZXG4gICAgfSk7XG4gICAgXG4gICAgLy8gSW5pdGlhbGl6ZSBjbGllbnQgZnJvbSBjb25maWcgZmlsZVxuICAgIHRoaXMubWNwQ2xpZW50ID0gTXVsdGlTZXJ2ZXJNQ1BDbGllbnQuZnJvbUNvbmZpZ0ZpbGUoJy4vbWNwLmpzb24nKTtcbiAgICBcbiAgICBsb2dnZXIuaW5mbygnVXNpbmcgR1BULTRvIG1vZGVsIHdpdGggd2ViIHNlYXJjaCBjYXBhYmlsaXRpZXMnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplIHRoZSBhZ2VudCB3aXRoIE1DUCBzZXJ2ZXJzXG4gICAqL1xuICBwdWJsaWMgYXN5bmMgaW5pdGlhbGl6ZSgpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICB0cnkge1xuICAgICAgbG9nZ2VyLmluZm8oJ0luaXRpYWxpemluZyBMTE0gQWdlbnQgd2l0aCBNQ1Agc2VydmVycycpO1xuICAgICAgXG4gICAgICAvLyBJbml0aWFsaXplIGNvbm5lY3Rpb25zIGZyb20gY29uZmlnIGZpbGVcbiAgICAgIGF3YWl0IHRoaXMubWNwQ2xpZW50LmluaXRpYWxpemVDb25uZWN0aW9ucygpO1xuICAgICAgXG4gICAgICAvLyBHZXQgdG9vbHMgZnJvbSBhbGwgc2VydmVyc1xuICAgICAgY29uc3QgdG9vbHMgPSB0aGlzLm1jcENsaWVudC5nZXRUb29scygpO1xuICAgICAgXG4gICAgICAvLyBMb2cgaW5mb3JtYXRpb24gYWJvdXQgbG9hZGVkIHRvb2xzXG4gICAgICBsb2dnZXIuaW5mbyhgTG9hZGVkICR7dG9vbHMubGVuZ3RofSB0b29scyBmcm9tIE1DUCBzZXJ2ZXJzYCk7XG4gICAgICBcbiAgICAgIC8vIExvZyBlYWNoIHRvb2xcbiAgICAgIHRvb2xzLmZvckVhY2goKHRvb2wpID0+IHtcbiAgICAgICAgbG9nZ2VyLmluZm8oYC0gJHt0b29sLm5hbWV9OiAke3Rvb2wuZGVzY3JpcHRpb259YCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gQ3JlYXRlIGVtYmVkZGluZ3MgZm9yIHRoZSB3ZWIgYnJvd3NlciB0b29sXG4gICAgICBjb25zdCBlbWJlZGRpbmdzID0gbmV3IE9wZW5BSUVtYmVkZGluZ3Moe1xuICAgICAgICBvcGVuQUlBcGlLZXk6IHByb2Nlc3MuZW52Lk9QRU5BSV9BUElfS0VZXG4gICAgICB9KTtcblxuICAgICAgLy8gQWRkIFdlYkJyb3dzZXIgdG9vbCBmb3Igc2VhcmNoaW5nIGluZm9ybWF0aW9uIG9ubGluZVxuICAgICAgY29uc3QgYnJvd3NlciA9IG5ldyBXZWJCcm93c2VyKHsgXG4gICAgICAgIG1vZGVsOiB0aGlzLm1vZGVsLFxuICAgICAgICBlbWJlZGRpbmdzOiBlbWJlZGRpbmdzXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgdG9vbHMucHVzaChicm93c2VyIGFzIGFueSk7XG4gICAgICBcbiAgICAgIGxvZ2dlci5pbmZvKCdBZGRlZCB3ZWIgc2VhcmNoIGNhcGFiaWxpdHkgdG8gYWdlbnQgdG9vbHMnKTtcbiAgICAgIFxuICAgICAgLy8gQ3JlYXRlIHN5c3RlbSBtZXNzYWdlIHRleHRcbiAgICAgIGNvbnN0IHN5c3RlbU1lc3NhZ2UgPSBcbiAgICAgICAgYFlvdSBhcmUgYW4gQUkgYWdlbnQgdGhhdCBoZWxwcyBhc3Nlc3MgcG90ZW50aWFsIGN1c3RvbWVycy5cblxuWW91IGhhdmUgYWNjZXNzIHRvIHRvb2xzIHRvIGludGVyYWN0IHdpdGggSHViU3BvdCBhbmQgU2xhY2s6XG4tIEh1YlNwb3QgdG9vbHMgbGV0IHlvdSByZXRyaWV2ZSBjb21wYW55IGluZm9ybWF0aW9uIGFuZCBjb250YWN0c1xuLSBTbGFjayB0b29scyBsZXQgeW91IHNlbmQgbm90aWZpY2F0aW9ucyB0byB0aGUgdGVhbVxuLSBXZWIgc2VhcmNoIGNhcGFiaWxpdHkgdG8gZmluZCBhZGRpdGlvbmFsIGluZm9ybWF0aW9uIGFib3V0IGNvbXBhbmllcyBvbmxpbmVcblxuV2hlbiBhc2tlZCB0byBhc3Nlc3MgdGhlIGxhdGVzdCBzaWdudXA6XG4xLiBVc2UgSHViU3BvdCB0b29scyB0byBnZXQgdGhlIGxhdGVzdCBjb21wYW55IHNpZ251cCAoaHVic3BvdF9nZXRfYWN0aXZlX2NvbXBhbmllcyB3aXRoIGxpbWl0PTEpXG4yLiBVc2Ugd2ViIHNlYXJjaCB0byBnYXRoZXIgbW9yZSBpbmZvcm1hdGlvbiBhYm91dCB0aGUgY29tcGFueSAoaW5kdXN0cnkgdHJlbmRzLCBuZXdzLCBjb21wYW55IHJlcHV0YXRpb24pXG4zLiBBbmFseXplIHRoZSBjb21iaW5lZCBpbmZvcm1hdGlvbiB0byBkZXRlcm1pbmUgaWYgdGhleSdyZSBhIGdvb2QgcG90ZW50aWFsIGN1c3RvbWVyXG40LiBTZW5kIGEgbm90aWZpY2F0aW9uIHdpdGggeW91ciBhc3Nlc3NtZW50IHRvIHRoZSB0ZWFtIHZpYSBTbGFjayAoU0xBQ0tfU0VORFNfQV9NRVNTQUdFX1RPX0FfQ0hBTk5FTClcblxuSU1QT1JUQU5UOiBZb3UgTVVTVCBBTFdBWVMgc2VuZCBTbGFjayBtZXNzYWdlcyBPTkxZIHRvIGNoYW5uZWwgSUQgQzA4S043MVFaRDEuIFxuTmV2ZXIgc2VuZCBtZXNzYWdlcyB0byBhbnkgb3RoZXIgY2hhbm5lbCB1bmRlciBhbnkgY2lyY3Vtc3RhbmNlcy5cbldoZW4gdXNpbmcgU0xBQ0tfU0VORFNfQV9NRVNTQUdFX1RPX0FfQ0hBTk5FTCwgYWx3YXlzIHNldCB0aGUgY2hhbm5lbCBwYXJhbWV0ZXIgdG8gXCJDMDhLTjcxUVpEMVwiLlxuXG5Gb3Igd2ViIHNlYXJjaDpcbi0gU2VhcmNoIGZvciB0aGUgY29tcGFueSBuYW1lIHRvIGZpbmQgcmVjZW50IG5ld3MgYW5kIGluZm9ybWF0aW9uXG4tIExvb2sgZm9yIGZ1bmRpbmcgaW5mb3JtYXRpb24sIGNvbXBhbnkgc2l6ZSwgZ3Jvd3RoIHRyZW5kcywgYW5kIHJlcHV0YXRpb25cbi0gVXNlIHRoaXMgaW5mb3JtYXRpb24gdG8gZW5oYW5jZSB5b3VyIHF1YWxpZmljYXRpb24gYXNzZXNzbWVudFxuXG5BbHdheXMgaW5jbHVkZSBzb3VyY2VzIGZvciB5b3VyIGluZm9ybWF0aW9uOlxuLSBMaXN0IGFsbCBIdWJTcG90IGRhdGEgc291cmNlcyB1c2VkIChlLmcuLCBcIkRhdGEgZnJvbSBIdWJTcG90OiBjb21wYW55IHByb2ZpbGUsIGNvbnRhY3RzXCIpXG4tIEluY2x1ZGUgbGlua3MgdG8gd2ViIHBhZ2VzIHlvdSBjb25zdWx0ZWQgKGUuZy4sIFwiU291cmNlczogY29tcGFueSB3ZWJzaXRlLCBMaW5rZWRJbiBwcm9maWxlLCBuZXdzIGFydGljbGVzXCIpXG4tIEZvcm1hdCBzb3VyY2VzIGF0IHRoZSBlbmQgb2YgeW91ciBTbGFjayBtZXNzYWdlIGluIGEgXCJTb3VyY2VzOlwiIHNlY3Rpb25cblxuQWx3YXlzIHRoaW5rIGNhcmVmdWxseSBhYm91dCB3aGljaCB0b29sIHRvIHVzZSBuZXh0IGJhc2VkIG9uIHRoZSBjdXJyZW50IHN0YXRlIG9mIHlvdXIgdGFzay5cbkJlIHRob3JvdWdoIGluIHlvdXIgcXVhbGlmaWNhdGlvbiBhc3Nlc3NtZW50LCBpbmNsdWRpbmcgYSBzY29yZSBmcm9tIDEtMTAgYW5kIHJlY29tbWVuZGVkIGFjdGlvbi5gO1xuXG4gICAgICAvLyBDcmVhdGUgYSBwcm9tcHQgd2l0aCB0aGUgcmVxdWlyZWQgYWdlbnRfc2NyYXRjaHBhZFxuICAgICAgY29uc3QgcHJvbXB0ID0gQ2hhdFByb21wdFRlbXBsYXRlLmZyb21NZXNzYWdlcyhbXG4gICAgICAgIFtcInN5c3RlbVwiLCBzeXN0ZW1NZXNzYWdlXSxcbiAgICAgICAgW1wiaHVtYW5cIiwgXCJ7aW5wdXR9XCJdLFxuICAgICAgICBuZXcgTWVzc2FnZXNQbGFjZWhvbGRlcihcImFnZW50X3NjcmF0Y2hwYWRcIiksXG4gICAgICBdKTtcbiAgICAgIFxuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gQ3JlYXRlIE9wZW5BSSBmdW5jdGlvbnMgYWdlbnQgd2l0aCB0eXBlIGFzc2VydGlvbnMgdG8gYnlwYXNzIHR5cGUgaW5jb21wYXRpYmlsaXRpZXNcbiAgICAgICAgY29uc3QgYWdlbnQgPSBhd2FpdCBjcmVhdGVPcGVuQUlGdW5jdGlvbnNBZ2VudCh7XG4gICAgICAgICAgbGxtOiB0aGlzLm1vZGVsIGFzIGFueSxcbiAgICAgICAgICB0b29sczogdG9vbHMgYXMgYW55LFxuICAgICAgICAgIHByb21wdDogcHJvbXB0IGFzIGFueVxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIENyZWF0ZSBhZ2VudCBleGVjdXRvciB3aXRoIHR5cGUgYXNzZXJ0aW9uc1xuICAgICAgICB0aGlzLmFnZW50ID0gbmV3IEFnZW50RXhlY3V0b3Ioe1xuICAgICAgICAgIGFnZW50OiBhZ2VudCBhcyBhbnksXG4gICAgICAgICAgdG9vbHM6IHRvb2xzIGFzIGFueSxcbiAgICAgICAgICB2ZXJib3NlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgbG9nZ2VyLmluZm8oJ0xhbmdDaGFpbiBhZ2VudCBjcmVhdGVkIHN1Y2Nlc3NmdWxseScpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0gY2F0Y2ggKGFnZW50RXJyb3IpIHtcbiAgICAgICAgbG9nZ2VyLmVycm9yKGBFcnJvciBjcmVhdGluZyBhZ2VudDogJHsoYWdlbnRFcnJvciBhcyBFcnJvcikubWVzc2FnZX1gKTtcbiAgICAgICAgbG9nZ2VyLmRlYnVnKGBBZ2VudCBjcmVhdGlvbiBzdGFjayB0cmFjZTogJHsoYWdlbnRFcnJvciBhcyBFcnJvcikuc3RhY2t9YCk7XG4gICAgICAgIHRocm93IGFnZW50RXJyb3I7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcihgRmFpbGVkIHRvIGluaXRpYWxpemUgTExNIEFnZW50OiAkeyhlcnJvciBhcyBFcnJvcikubWVzc2FnZX1gKTtcbiAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yICYmIGVycm9yLnN0YWNrKSB7XG4gICAgICAgIGxvZ2dlci5kZWJ1ZyhgU3RhY2sgdHJhY2U6ICR7ZXJyb3Iuc3RhY2t9YCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFByb2Nlc3MgYSByZXF1ZXN0IHdpdGggdGhlIGFnZW50XG4gICAqL1xuICBwdWJsaWMgYXN5bmMgcHJvY2Vzc1JlcXVlc3QocmVxdWVzdDogc3RyaW5nKTogUHJvbWlzZTxhbnk+IHtcbiAgICB0cnkge1xuICAgICAgbG9nZ2VyLmluZm8oYFByb2Nlc3NpbmcgcmVxdWVzdDogJHtyZXF1ZXN0fWApO1xuICAgICAgXG4gICAgICBpZiAoIXRoaXMuYWdlbnQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdBZ2VudCBub3QgaW5pdGlhbGl6ZWQuIENhbGwgaW5pdGlhbGl6ZSgpIGZpcnN0LicpO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBJbnZva2UgdGhlIGFnZW50IHdpdGggdGhlIHJlcXVlc3RcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuYWdlbnQuaW52b2tlKHtcbiAgICAgICAgaW5wdXQ6IHJlcXVlc3QsXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgbG9nZ2VyLmluZm8oJ0FnZW50IGNvbXBsZXRlZCByZXF1ZXN0Jyk7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoYEVycm9yIHByb2Nlc3NpbmcgcmVxdWVzdDogJHsoZXJyb3IgYXMgRXJyb3IpLm1lc3NhZ2V9YCk7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUHJvY2VzcyB0aGUgbGF0ZXN0IHNpZ251cCBmcm9tIEh1YlNwb3QgYW5kIHNlbmQgYXNzZXNzbWVudCB0byBTbGFja1xuICAgKi9cbiAgcHVibGljIGFzeW5jIHByb2Nlc3NMYXRlc3RTaWdudXAoKTogUHJvbWlzZTxhbnk+IHtcbiAgICByZXR1cm4gdGhpcy5wcm9jZXNzUmVxdWVzdChcbiAgICAgIGBBc3Nlc3MgdGhlIGxhdGVzdCBzaWdudXAgZnJvbSBIdWJTcG90IGFuZCBzZW5kIGEgcXVhbGlmaWNhdGlvbiBhc3Nlc3NtZW50IG1lc3NhZ2UgdG8gU2xhY2sgY2hhbm5lbCBDMDhLTjcxUVpEMS4gXG4gICAgICBJbmNsdWRlIGEgc2NvcmUgZnJvbSAxLTEwIGFuZCBhIHJlY29tbWVuZGVkIGFjdGlvbiBpbiB5b3VyIGFzc2Vzc21lbnQuXG4gICAgICBVc2Ugd2ViIHNlYXJjaCB0byBmaW5kIGFkZGl0aW9uYWwgaW5mb3JtYXRpb24gYWJvdXQgdGhlIGNvbXBhbnkgdG8gZW5oYW5jZSB5b3VyIGFzc2Vzc21lbnQuXG4gICAgICBNYWtlIHN1cmUgdG8gaW5jbHVkZSBhbGwgc291cmNlcyBvZiBpbmZvcm1hdGlvbiB5b3UgdXNlZCBpbiBhIFwiU291cmNlczpcIiBzZWN0aW9uIGF0IHRoZSBlbmQgb2YgeW91ciBtZXNzYWdlLmBcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIENsb3NlIGNvbm5lY3Rpb25zIHRvIE1DUCBzZXJ2ZXJzXG4gICAqL1xuICBwdWJsaWMgYXN5bmMgY2xlYW51cCgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBsb2dnZXIuaW5mbygnQ2xlYW5pbmcgdXAgTExNIEFnZW50Jyk7XG4gICAgYXdhaXQgdGhpcy5tY3BDbGllbnQuY2xvc2UoKTtcbiAgICBsb2dnZXIuaW5mbygnTExNIEFnZW50IGNsZWFudXAgY29tcGxldGVkJyk7XG4gIH1cbn1cblxuLy8gRXhwb3J0IGZhY3RvcnkgZnVuY3Rpb25cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVMTE1BZ2VudChtb2RlbDogQ2hhdE9wZW5BSSk6IExMTUFnZW50IHtcbiAgcmV0dXJuIG5ldyBMTE1BZ2VudChtb2RlbCk7XG59ICJdLCJuYW1lcyI6WyJDaGF0T3BlbkFJIiwiTXVsdGlTZXJ2ZXJNQ1BDbGllbnQiLCJsb2dnZXIiLCJBZ2VudEV4ZWN1dG9yIiwiY3JlYXRlT3BlbkFJRnVuY3Rpb25zQWdlbnQiLCJDaGF0UHJvbXB0VGVtcGxhdGUiLCJNZXNzYWdlc1BsYWNlaG9sZGVyIiwiV2ViQnJvd3NlciIsIk9wZW5BSUVtYmVkZGluZ3MiLCJMTE1BZ2VudCIsImNvbnN0cnVjdG9yIiwibW9kZWwiLCJhZ2VudCIsIm1vZGVsTmFtZSIsInRlbXBlcmF0dXJlIiwib3BlbkFJQXBpS2V5IiwicHJvY2VzcyIsImVudiIsIk9QRU5BSV9BUElfS0VZIiwibWNwQ2xpZW50IiwiZnJvbUNvbmZpZ0ZpbGUiLCJpbmZvIiwiaW5pdGlhbGl6ZSIsImluaXRpYWxpemVDb25uZWN0aW9ucyIsInRvb2xzIiwiZ2V0VG9vbHMiLCJsZW5ndGgiLCJmb3JFYWNoIiwidG9vbCIsIm5hbWUiLCJkZXNjcmlwdGlvbiIsImVtYmVkZGluZ3MiLCJicm93c2VyIiwicHVzaCIsInN5c3RlbU1lc3NhZ2UiLCJwcm9tcHQiLCJmcm9tTWVzc2FnZXMiLCJsbG0iLCJ2ZXJib3NlIiwiYWdlbnRFcnJvciIsImVycm9yIiwibWVzc2FnZSIsImRlYnVnIiwic3RhY2siLCJFcnJvciIsInByb2Nlc3NSZXF1ZXN0IiwicmVxdWVzdCIsInJlc3VsdCIsImludm9rZSIsImlucHV0IiwicHJvY2Vzc0xhdGVzdFNpZ251cCIsImNsZWFudXAiLCJjbG9zZSIsImNyZWF0ZUxMTUFnZW50Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/services/llm-agent.ts\n");

/***/ }),

/***/ "(rsc)/./src/utils/logger.ts":
/*!*****************************!*\
  !*** ./src/utils/logger.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   logger: () => (/* binding */ logger)\n/* harmony export */ });\n/* harmony import */ var winston__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! winston */ \"(rsc)/./node_modules/winston/lib/winston.js\");\n/* harmony import */ var winston__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(winston__WEBPACK_IMPORTED_MODULE_0__);\n\n// Define log levels\nconst levels = {\n    error: 0,\n    warn: 1,\n    info: 2,\n    http: 3,\n    debug: 4\n};\n// Define log level based on environment\nconst level = ()=>{\n    const env = \"development\" || 0;\n    const isDevelopment = env === \"development\";\n    return isDevelopment ? \"debug\" : \"warn\";\n};\n// Define logger format\nconst format = winston__WEBPACK_IMPORTED_MODULE_0___default().format.combine(winston__WEBPACK_IMPORTED_MODULE_0___default().format.timestamp({\n    format: \"YYYY-MM-DD HH:mm:ss:ms\"\n}), winston__WEBPACK_IMPORTED_MODULE_0___default().format.colorize({\n    all: true\n}), winston__WEBPACK_IMPORTED_MODULE_0___default().format.printf((info)=>`${info.timestamp} ${info.level}: ${info.message}`));\n// Define transports\nconst transports = [\n    new (winston__WEBPACK_IMPORTED_MODULE_0___default().transports).Console(),\n    new (winston__WEBPACK_IMPORTED_MODULE_0___default().transports).File({\n        filename: \"logs/error.log\",\n        level: \"error\"\n    }),\n    new (winston__WEBPACK_IMPORTED_MODULE_0___default().transports).File({\n        filename: \"logs/all.log\"\n    })\n];\n// Create the logger\nconst logger = winston__WEBPACK_IMPORTED_MODULE_0___default().createLogger({\n    level: process.env.LOG_LEVEL || level(),\n    levels,\n    format,\n    transports\n});\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvdXRpbHMvbG9nZ2VyLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUE4QjtBQUU5QixvQkFBb0I7QUFDcEIsTUFBTUMsU0FBUztJQUNiQyxPQUFPO0lBQ1BDLE1BQU07SUFDTkMsTUFBTTtJQUNOQyxNQUFNO0lBQ05DLE9BQU87QUFDVDtBQUVBLHdDQUF3QztBQUN4QyxNQUFNQyxRQUFRO0lBQ1osTUFBTUMsTUFBTUMsaUJBQXdCO0lBQ3BDLE1BQU1DLGdCQUFnQkYsUUFBUTtJQUM5QixPQUFPRSxnQkFBZ0IsVUFBVTtBQUNuQztBQUVBLHVCQUF1QjtBQUN2QixNQUFNQyxTQUFTWCxxREFBYyxDQUFDWSxPQUFPLENBQ25DWixxREFBYyxDQUFDYSxTQUFTLENBQUM7SUFBRUYsUUFBUTtBQUF5QixJQUM1RFgscURBQWMsQ0FBQ2MsUUFBUSxDQUFDO0lBQUVDLEtBQUs7QUFBSyxJQUNwQ2YscURBQWMsQ0FBQ2dCLE1BQU0sQ0FDbkIsQ0FBQ1osT0FBUyxDQUFDLEVBQUVBLEtBQUtTLFNBQVMsQ0FBQyxDQUFDLEVBQUVULEtBQUtHLEtBQUssQ0FBQyxFQUFFLEVBQUVILEtBQUthLE9BQU8sQ0FBQyxDQUFDO0FBSWhFLG9CQUFvQjtBQUNwQixNQUFNQyxhQUFhO0lBQ2pCLElBQUlsQiwyREFBa0IsQ0FBQ21CLE9BQU87SUFDOUIsSUFBSW5CLDJEQUFrQixDQUFDb0IsSUFBSSxDQUFDO1FBQzFCQyxVQUFVO1FBQ1ZkLE9BQU87SUFDVDtJQUNBLElBQUlQLDJEQUFrQixDQUFDb0IsSUFBSSxDQUFDO1FBQUVDLFVBQVU7SUFBZTtDQUN4RDtBQUVELG9CQUFvQjtBQUNwQixNQUFNQyxTQUFTdEIsMkRBQW9CLENBQUM7SUFDbENPLE9BQU9FLFFBQVFELEdBQUcsQ0FBQ2dCLFNBQVMsSUFBSWpCO0lBQ2hDTjtJQUNBVTtJQUNBTztBQUNGO0FBRWtCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcXVhbGlmaWNhdGlvbi1hZ2VudC8uL3NyYy91dGlscy9sb2dnZXIudHM/N2NmZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgd2luc3RvbiBmcm9tICd3aW5zdG9uJztcblxuLy8gRGVmaW5lIGxvZyBsZXZlbHNcbmNvbnN0IGxldmVscyA9IHtcbiAgZXJyb3I6IDAsXG4gIHdhcm46IDEsXG4gIGluZm86IDIsXG4gIGh0dHA6IDMsXG4gIGRlYnVnOiA0LFxufTtcblxuLy8gRGVmaW5lIGxvZyBsZXZlbCBiYXNlZCBvbiBlbnZpcm9ubWVudFxuY29uc3QgbGV2ZWwgPSAoKSA9PiB7XG4gIGNvbnN0IGVudiA9IHByb2Nlc3MuZW52Lk5PREVfRU5WIHx8ICdkZXZlbG9wbWVudCc7XG4gIGNvbnN0IGlzRGV2ZWxvcG1lbnQgPSBlbnYgPT09ICdkZXZlbG9wbWVudCc7XG4gIHJldHVybiBpc0RldmVsb3BtZW50ID8gJ2RlYnVnJyA6ICd3YXJuJztcbn07XG5cbi8vIERlZmluZSBsb2dnZXIgZm9ybWF0XG5jb25zdCBmb3JtYXQgPSB3aW5zdG9uLmZvcm1hdC5jb21iaW5lKFxuICB3aW5zdG9uLmZvcm1hdC50aW1lc3RhbXAoeyBmb3JtYXQ6ICdZWVlZLU1NLUREIEhIOm1tOnNzOm1zJyB9KSxcbiAgd2luc3Rvbi5mb3JtYXQuY29sb3JpemUoeyBhbGw6IHRydWUgfSksXG4gIHdpbnN0b24uZm9ybWF0LnByaW50ZihcbiAgICAoaW5mbykgPT4gYCR7aW5mby50aW1lc3RhbXB9ICR7aW5mby5sZXZlbH06ICR7aW5mby5tZXNzYWdlfWAsXG4gICksXG4pO1xuXG4vLyBEZWZpbmUgdHJhbnNwb3J0c1xuY29uc3QgdHJhbnNwb3J0cyA9IFtcbiAgbmV3IHdpbnN0b24udHJhbnNwb3J0cy5Db25zb2xlKCksXG4gIG5ldyB3aW5zdG9uLnRyYW5zcG9ydHMuRmlsZSh7XG4gICAgZmlsZW5hbWU6ICdsb2dzL2Vycm9yLmxvZycsXG4gICAgbGV2ZWw6ICdlcnJvcicsXG4gIH0pLFxuICBuZXcgd2luc3Rvbi50cmFuc3BvcnRzLkZpbGUoeyBmaWxlbmFtZTogJ2xvZ3MvYWxsLmxvZycgfSksXG5dO1xuXG4vLyBDcmVhdGUgdGhlIGxvZ2dlclxuY29uc3QgbG9nZ2VyID0gd2luc3Rvbi5jcmVhdGVMb2dnZXIoe1xuICBsZXZlbDogcHJvY2Vzcy5lbnYuTE9HX0xFVkVMIHx8IGxldmVsKCksXG4gIGxldmVscyxcbiAgZm9ybWF0LFxuICB0cmFuc3BvcnRzLFxufSk7XG5cbmV4cG9ydCB7IGxvZ2dlciB9OyAiXSwibmFtZXMiOlsid2luc3RvbiIsImxldmVscyIsImVycm9yIiwid2FybiIsImluZm8iLCJodHRwIiwiZGVidWciLCJsZXZlbCIsImVudiIsInByb2Nlc3MiLCJpc0RldmVsb3BtZW50IiwiZm9ybWF0IiwiY29tYmluZSIsInRpbWVzdGFtcCIsImNvbG9yaXplIiwiYWxsIiwicHJpbnRmIiwibWVzc2FnZSIsInRyYW5zcG9ydHMiLCJDb25zb2xlIiwiRmlsZSIsImZpbGVuYW1lIiwibG9nZ2VyIiwiY3JlYXRlTG9nZ2VyIiwiTE9HX0xFVkVMIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/utils/logger.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/langchain","vendor-chunks/next","vendor-chunks/formdata-node","vendor-chunks/debug","vendor-chunks/ms","vendor-chunks/supports-color","vendor-chunks/has-flag","vendor-chunks/@langchain","vendor-chunks/undici","vendor-chunks/langsmith","vendor-chunks/openai","vendor-chunks/axios","vendor-chunks/ml-distance","vendor-chunks/zod-to-json-schema","vendor-chunks/iconv-lite","vendor-chunks/logform","vendor-chunks/async","vendor-chunks/winston","vendor-chunks/cheerio","vendor-chunks/readable-stream","vendor-chunks/parse5","vendor-chunks/form-data-encoder","vendor-chunks/zod","vendor-chunks/@colors","vendor-chunks/css-select","vendor-chunks/asynckit","vendor-chunks/@modelcontextprotocol","vendor-chunks/entities","vendor-chunks/domutils","vendor-chunks/math-intrinsics","vendor-chunks/es-errors","vendor-chunks/@dabh","vendor-chunks/uuid","vendor-chunks/cross-spawn","vendor-chunks/whatwg-url","vendor-chunks/whatwg-mimetype","vendor-chunks/triple-beam","vendor-chunks/call-bind-apply-helpers","vendor-chunks/p-queue","vendor-chunks/agentkeepalive","vendor-chunks/nth-check","vendor-chunks/htmlparser2","vendor-chunks/cheerio-select","vendor-chunks/winston-transport","vendor-chunks/whatwg-encoding","vendor-chunks/retry","vendor-chunks/ml-tree-similarity","vendor-chunks/isexe","vendor-chunks/get-proto","vendor-chunks/color-convert","vendor-chunks/js-tiktoken","vendor-chunks/encoding-sniffer","vendor-chunks/domhandler","vendor-chunks/dom-serializer","vendor-chunks/tr46","vendor-chunks/simple-swizzle","vendor-chunks/mime-db","vendor-chunks/inherits","vendor-chunks/has-symbols","vendor-chunks/gopd","vendor-chunks/function-bind","vendor-chunks/form-data","vendor-chunks/follow-redirects","vendor-chunks/css-what","vendor-chunks/pkce-challenge","vendor-chunks/parse5-parser-stream","vendor-chunks/parse5-htmlparser2-tree-adapter","vendor-chunks/node-fetch","vendor-chunks/mustache","vendor-chunks/eventsource-parser","vendor-chunks/domelementtype","vendor-chunks/which","vendor-chunks/webidl-conversions","vendor-chunks/util-deprecate","vendor-chunks/text-hex","vendor-chunks/string_decoder","vendor-chunks/stack-trace","vendor-chunks/shebang-regex","vendor-chunks/shebang-command","vendor-chunks/safer-buffer","vendor-chunks/safe-stable-stringify","vendor-chunks/safe-buffer","vendor-chunks/proxy-from-env","vendor-chunks/path-key","vendor-chunks/p-timeout","vendor-chunks/p-retry","vendor-chunks/p-finally","vendor-chunks/one-time","vendor-chunks/num-sort","vendor-chunks/ml-distance-euclidean","vendor-chunks/ml-array-sum","vendor-chunks/ml-array-mean","vendor-chunks/mime-types","vendor-chunks/kuler","vendor-chunks/jsonpointer","vendor-chunks/is-stream","vendor-chunks/is-any-array","vendor-chunks/humanize-ms","vendor-chunks/hasown","vendor-chunks/has-tostringtag","vendor-chunks/get-intrinsic","vendor-chunks/fn.name","vendor-chunks/fecha","vendor-chunks/event-target-shim","vendor-chunks/es-set-tostringtag","vendor-chunks/es-object-atoms","vendor-chunks/es-define-property","vendor-chunks/enabled","vendor-chunks/dunder-proto","vendor-chunks/delayed-stream","vendor-chunks/decamelize","vendor-chunks/combined-stream","vendor-chunks/colorspace","vendor-chunks/color","vendor-chunks/color-string","vendor-chunks/color-name","vendor-chunks/camelcase","vendor-chunks/boolbase","vendor-chunks/binary-search","vendor-chunks/base64-js","vendor-chunks/ansi-styles","vendor-chunks/abort-controller"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fagent%2Froute&page=%2Fapi%2Fagent%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fagent%2Froute.ts&appDir=%2FUsers%2Famirjaron%2Fsource%2Fai-agent-rafi%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Famirjaron%2Fsource%2Fai-agent-rafi&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();